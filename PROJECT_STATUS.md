# Photoshoot AI Bot ‚Äî –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞:** 2026-01-16
**–°—Ç–∞—Ç—É—Å:** MVP —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–ë–æ—Ç `@photoshoot_generator_bot` (ID: 8589543907, –Ω–∞–∑–≤–∞–Ω–∏–µ: "–§–æ—Ç–æ –¥–ª—è —Ä–µ–∑—é–º–µ") –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞ —á–µ—Ä–µ–∑ OpenAI: ~2.5 —Å–µ–∫
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ kie.ai: ~15 —Å–µ–∫
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏: ~28 —Å–µ–∫

---

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

- ‚úÖ Telegram –±–æ—Ç @photoshoot_generator_bot ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å kie.ai API (nano-banana-edit) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI (gpt-4o-mini) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—ã–±–æ—Ä –ø–æ–ª–∞ (–º—É–∂—Å–∫–æ–π/–∂–µ–Ω—Å–∫–∏–π —Å—Ç–∏–ª—å) ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å—Ç—É–¥–∏–π–Ω—ã—Ö –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
photoshoot_ai/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ + –ø—Ä–æ–º–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py            # /start, –≤—ã–±–æ—Ä –ø–æ–ª–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ photo.py            # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ
‚îÇ   ‚îú‚îÄ‚îÄ states/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ generation.py       # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kie_client.py       # –ö–ª–∏–µ–Ω—Ç kie.ai API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ openai_client.py    # –ö–ª–∏–µ–Ω—Ç OpenAI API
‚îÇ   ‚îî‚îÄ‚îÄ keyboards/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ inline.py           # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ .env                        # –°–µ–∫—Ä–µ—Ç—ã (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îú‚îÄ‚îÄ .env.example                # –®–∞–±–ª–æ–Ω –¥–ª—è .env
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ PROJECT_SPEC.md             # –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îî‚îÄ‚îÄ PROJECT_STATUS.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
cd /Users/kudinow/Documents/Cursor_PRO/photoshoot_ai

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python -m bot.main
```

---

## API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

| –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ú–æ–¥–µ–ª—å |
|--------|------------|--------|
| OpenAI | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ | gpt-4o-mini |
| kie.ai | –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Ñ–æ—Ç–æ | google/nano-banana-edit |
| Telegram | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞ | aiogram 3.13.1 |

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```
BOT_TOKEN=...           # –¢–æ–∫–µ–Ω –æ—Ç BotFather
KIE_API_KEY=...         # –ö–ª—é—á kie.ai
KIE_API_URL=https://api.kie.ai
OPENAI_API_KEY=...      # –ö–ª—é—á OpenAI
DEBUG=true              # –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
```

---

## kie.ai API

**Endpoints:**
- `POST /api/v1/jobs/createTask` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `GET /api/v1/jobs/recordInfo?taskId=xxx` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "model": "google/nano-banana-edit",
  "input": {
    "prompt": "...",
    "image_urls": ["https://..."],
    "output_format": "jpeg",
    "image_size": "auto"
  }
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ createTask:**
```json
{
  "code": 200,
  "message": "success",
  "data": {"taskId": "..."}
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ recordInfo (success):**
```json
{
  "data": {
    "taskId": "...",
    "state": "success",
    "resultJson": "{\"resultUrls\":[\"https://...\"]}"
  }
}
```

---

## User Flow

1. `/start` ‚Üí –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –≤—ã–±–æ—Ä –ø–æ–ª–∞
2. –í—ã–±–æ—Ä –ø–æ–ª–∞ ‚Üí –ö–Ω–æ–ø–∫–∏ "üë® –ú—É–∂—Å–∫–æ–π" / "üë© –ñ–µ–Ω—Å–∫–∏–π"
3. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ ‚Üí –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–°–æ–∑–¥–∞—é –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç..."
4. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí –ì–æ—Ç–æ–≤–æ–µ —Ñ–æ—Ç–æ + –∫–Ω–æ–ø–∫–∞ "üîÑ –°–æ–∑–¥–∞—Ç—å –µ—â—ë"

---

## –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ —á–µ—Ä–µ–∑ OpenAI GPT-4o-mini

**–§–∞–π–ª—ã:**
- `bot/config.py` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (`PROMPT_SYSTEM`) –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å—É—Ñ—Ñ–∏–∫—Å (`PROMPT_CRITICAL_SUFFIX`)
- `bot/services/openai_client.py` ‚Äî –∫–ª–∏–µ–Ω—Ç OpenAI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–ª
2. OpenAI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Å—Ç—É–¥–∏–π–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ä–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–∞–π–¥–ª–∞–π–Ω–æ–≤
3. –ö –ø—Ä–æ–º–ø—Ç—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å—É—Ñ—Ñ–∏–∫—Å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä—Ç –ª–∏—Ü–∞
4. –ì–æ—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ kie.ai

**–°—Ç–∏–ª—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—É–¥–∏–π–Ω—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã
- –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞: nude, pastel, muted tones (olive, sage, beige, taupe)
- –§–æ–Ω: seamless backdrop (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ç–æ–Ω–∞)
- –û—Å–≤–µ—â–µ–Ω–∏–µ: soft studio lighting, three-point lighting
- –û–¥–µ–∂–¥–∞: –¥–µ–ª–æ–≤–∞—è/—ç–ª–µ–≥–∞–Ω—Ç–Ω–∞—è (–ø–æ –ø–æ–ª—É)
- –ö–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ: headshot, chest-up

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- aiogram 3.13.1 - Telegram bot framework
- aiohttp 3.10.5 - Async HTTP –∫–ª–∏–µ–Ω—Ç
- python-dotenv 1.0.1 - –ó–∞–≥—Ä—É–∑–∫–∞ .env
- pydantic 2.9.2 - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- pydantic-settings 2.5.2 - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- openai >= 1.0.0 - OpenAI API –∫–ª–∏–µ–Ω—Ç

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (TODO)

- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä —Å—Ç–∏–ª—è —Ñ–æ—Ç–æ (–¥–µ–ª–æ–≤–æ–π, casual, creative)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—é (–ø–æ–¥–ø–∏—Å–∫–∞, –æ–ø–ª–∞—Ç–∞ –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –≤ –ë–î
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ç–æ –∑–∞ —Ä–∞–∑
- [ ] Webhook –≤–º–µ—Å—Ç–æ polling –¥–ª—è production

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç ~20-30 —Å–µ–∫—É–Ω–¥
2. Telegram URL —Ñ–∞–π–ª–æ–≤ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Äî kie.ai –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—Ç—å —Å–∫–∞—á–∞—Ç—å
3. –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∞–∫–∂–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL (tempfile.aiquickdraw.com)

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-16*
